## js 的面向对象

实现方法 1 利用构造函数 实现面向对象

## 构造函数

典型的面向对象编程语言（比如 C++ 和 Java），都有“类”（class）这个概念。所谓“类”就是对象的模板，对象就是“类”的实例。但是，JavaScript 语言的对象体系，不是基于“类”的，而是基于**构造函数（constructor）和原型链（prototype）**

构造函数就是一个普通的函数，但是有自己的特征和用法。

构造函数的特点有两个。

- 函数体内部使用了`this`关键字，代表了所要生成的对象实例。
- 生成对象的时候，必须使用`new`命令。

## new 命令

这种情况下，构造函数就变成了普通函数，并不会生成实例对象。而且由于后面会说到的原因，`this`这时代表全局对象，将造成一些意想不到的结果。

### new 命令的原理

```csharp
[new命令原理](https://github.com/jornsky/javascript-/tree/master/javascript%E7%9A%84this%E7%94%A8%E6%B3%95)
```

构造函数之所以叫“构造函数”，就是说这个函数的目的，就是操作一个空对象（即`this`对象），将其“构造”为需要的样子。

## 使用场合

`this`主要有以下几个使用场合。

**（1）全局环境**

全局环境使用`this`，它指的就是顶层对象`window`。

**（2）构造函数**

构造函数中的`this`，指的是实例对象。

**3）对象的方法**

如果对象的方法里面包含`this`，`this`的指向就是方法运行时所在的对象。该方法赋值给另一个对象，就会改变`this`的指向。

## 使用注意点

避免多层 this

避免数组处理方法中的 this

避免回调函数中的 this

## 绑定 this 的方法

##### Function.prototype.call()

函数实例的`call`方法，可以指定函数内部`this`的指向（即函数执行时所在的作用域），然后在所指定的作用域中，调用该函数。

`call`方法的参数，应该是一个对象。如果参数为空、`null`和`undefined`，则默认传入全局对象。

`call`方法还可以接受多个参数。

`call`的第一个参数就是`this`所要指向的那个对象，后面的参数则是函数调用时所需的参数。

###### Function.prototype.apply()

`apply`方法的作用与`call`方法类似，也是改变`this`指向，然后再调用该函数。唯一的区别就是，它接收一个数组作为函数执行时的参数，使用格式如下。

`apply`方法的第一个参数也是`this`所要指向的那个对象，如果设为`null`或`undefined`，则等同于指定全局对象。第二个参数则是一个数组，该数组的所有成员依次作为参数，传入原函数。

###### Function.prototype.bind()

`bind()`方法用于将函数体内的`this`绑定到某个对象，然后返回一个新函数。

使用注意点：

**（1）每一次返回一个新函数**

\*_（2）结合回调函数使用_

**（3）结合`call()`方法使用**

[地址](https://github.com/jornsky/javascript-/tree/master/javascript%E7%9A%84this%E7%94%A8%E6%B3%95)

# 对象的继承

### 构造函数的缺点

JavaScript 通过构造函数生成新对象，因此构造函数可以视为对象的模板。实例对象的属性和方法，可以定义在构造函数内部

通过构造函数为实例对象定义属性，虽然很方便，但是有一个缺点。同一个构造函数的多个实例之间，无法共享属性，从而造成对系统资源的浪费

**这个问题的解决方法，就是 JavaScript 的原型对象（prototype）。**

总结一下，原型对象的作用，就是定义所有实例对象共享的属性和方法。这也是它被称为原型对象的原因，而实例对象可以视作从原型对象衍生出来的子对象。

### 原型链

1、如果一层层地上溯，所有对象的原型最终都可以上溯到`Object.prototype`

就是所有对象都有`valueOf`和`toString`方法的原因，

2、原型链的尽头就是`null`

### constructor 属性

`prototype`对象有一个`constructor`属性，默认指向`prototype`对象所在的构造函数

`constructor`属性的作用是，可以得知某个实例对象，到底是哪一个构造函数产生的。

## instanceof 运算符

`instanceof`运算符返回一个布尔值，表示对象是否为某个构造函数的实例。

## 构造函数的继承
